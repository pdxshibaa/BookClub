import{j as t,H as Ie,R as _e,a as z,N as Se,L as Le,u as Ae,b as Be,r as h,c as De}from"./vendor-B7W8t4e6.js";import{i as Te,g as Ee,a as Re,o as $e,q as Pe,b as Ue,c as Fe,d as ae,e as ie,s as Me,f as Oe,h as le,u as qe,j as Ye}from"./firebase-AeXqHF1f.js";(function(){const f=document.createElement("link").relList;if(f&&f.supports&&f.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))p(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const d of l.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&p(d)}).observe(document,{childList:!0,subtree:!0});function g(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerPolicy&&(l.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?l.credentials="include":r.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function p(r){if(r.ep)return;r.ep=!0;const l=g(r);fetch(r.href,l)}})();const Ge={apiKey:"AIzaSyAbIWMqgTOnkQ0jE02f7BpDm0JkhZYpjQk",authDomain:"bookclubbackend.firebaseapp.com",projectId:"bookclubbackend",storageBucket:"bookclubbackend.firebasestorage.app",messagingSenderId:"219050497346",appId:"1:219050497346:web:85e8c71bf341ca3c8164db",measurementId:"G-ZGKWVBZN6G"},de=Te(Ge),R=Ee(de),K=Re(de),We="/BookClub/assets/shiba-books-logo-8ys4TGCK.png",ue=[{id:"angelas",name:"Angela's Book Club",sheetUrl:"https://docs.google.com/spreadsheets/d/1uVwfBjOxbpjiKBwH7-Rfakkgr3lu-krG3EcdzrMEmW4/export?format=csv"},{id:"um-pdx",name:"U-M Club of PDX",sheetUrl:"https://docs.google.com/spreadsheets/d/1muayA4NBsVt1t9WEX9GAAnkVpQN5-RJOdb3eJPHlIrM/export?format=csv"},{id:"peggys",name:"Peggy's Books",sheetUrl:"https://docs.google.com/spreadsheets/d/1aiot7Ht3RfslIlLefEc5FnY5NXZKyd_KWqRj8hKRqxI/export?format=csv"}],ce={"sharon@tutorshiba.com":["angelas","um-pdx","peggys"],"your.email@example.com":["angelas","um-pdx","peggys"]},ze="pQLpMHVAOBKvdXVGdoigd7ZVHNu47E25cZoN2A40sGGSBRiX",Ke="AIzaSyCOJcLj0MlDQAsiYmZ174XFBqm3g2NYUjs",me=We,V=c=>{if(!c||typeof c!="string")return new Date(0);const f=c.trim(),g=f.match(/^([a-zA-Z]+)[^0-9]*(\d{2,4})$/i);if(g){const l=g[1].toLowerCase().substring(0,3);let d=parseInt(g[2],10);d<100&&(d=d<70?2e3+d:1900+d);const D={jan:0,feb:1,mar:2,apr:3,may:4,jun:5,jul:6,aug:7,sep:8,oct:9,nov:10,dec:11};if(D[l]!==void 0&&!isNaN(d))return new Date(d,D[l],1)}const p=f.match(/^(\d{1,2})[\/-](\d{4})$/);if(p){const l=parseInt(p[1],10)-1,d=parseInt(p[2],10);if(l>=0&&l<12&&d>1900)return new Date(d,l,1)}const r=new Date(f);return!isNaN(r.getTime())&&r.getFullYear()>1900?r:new Date(0)},Ve=()=>t.jsx("style",{children:`
    body {
      background-color: #ffffff; /* White background */
      color: #333333;
    }
    h1, h2, h3 {
      color: #4a148c !important; /* Purple */
    }
    .tab-btn {
      border: 1px solid #663399 !important;
      color: #663399 !important;
      background: white !important;
    }
    .tab-btn.active {
      background-color: #663399 !important;
      color: white !important;
    }
    .action-btn {
      background-color: #663399 !important;
    }
    .action-btn.btn-suggest {
      background-color: #8e44ad !important;
      color: white !important;
    }
    .club-card {
      background-color: white;
      transition: transform 0.2s, background-color 0.2s;
    }
    .club-card:hover {
      background-color: #f3e5f5 !important;
      transform: translateY(-5px);
    }
  `}),He=()=>t.jsxs("div",{className:"app-container",style:{textAlign:"center",padding:"30px 20px"},children:[t.jsx("h1",{style:{marginBottom:"10px"},children:"Welcome to the Book Club Portal"}),t.jsx("img",{src:me,alt:"Shiba Books Logo",style:{width:"120px",marginBottom:"5px"}}),t.jsx("p",{style:{fontSize:"1.2rem",marginBottom:"20px"},children:"Please select a book club to visit:"}),t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"20px",flexWrap:"wrap",marginBottom:"60px"},children:ue.map(c=>t.jsx(Le,{to:`/club/${c.id}`,style:{textDecoration:"none"},children:t.jsxs("div",{className:"club-card",style:{border:"1px solid #ddd",borderRadius:"12px",padding:"30px",width:"220px",boxShadow:"0 4px 6px rgba(0,0,0,0.1)",cursor:"pointer",color:"#333"},children:[t.jsx("h3",{style:{marginTop:0},children:c.name}),t.jsx("span",{style:{color:"#663399",fontWeight:"bold"},children:"Enter Club â†’"})]})},c.id))}),t.jsxs("div",{style:{maxWidth:"800px",margin:"0 auto",textAlign:"center",backgroundColor:"#f3e5f5",padding:"20px",borderRadius:"16px",boxShadow:"0 10px 30px rgba(0,0,0,0.08)",border:"1px solid #f0f0f0",lineHeight:"1.8",color:"#444",fontSize:"0.75rem"},children:[t.jsx("h2",{style:{color:"#4a148c",marginTop:0,borderBottom:"2px solid #663399",paddingBottom:"5px",display:"inline-block",marginBottom:"10px"},children:"About the Book Club Portal"}),t.jsx("p",{children:"I designed the Book Club Portal so my local book club could use to help choose new books and remember the books weâ€™ve read. I canâ€™t predict every issue that may arise, and addressing issues may take time, so please use this site with that in mind. All books, lists, and suggestions are created by the book clubs and their members. They reflect the interests of those people only and are not endorsements by me or by other users of the site."}),t.jsx("p",{children:"If something breaks or could be better, or you have a book club to add to the portal, Iâ€™m glad to hear about it."}),t.jsx("p",{style:{fontWeight:"bold",color:"#663399",fontSize:"1.1rem",marginTop:"10px"},children:"Happy reading. ðŸ•"})]})]}),Qe=()=>{const{clubId:c}=Ae(),f=Be(),g=ue.find(e=>e.id===c),p=c==="peggys",[r,l]=h.useState(null),[d,D]=h.useState(!1),[H,Q]=h.useState(""),[Z,X]=h.useState(""),[u,j]=h.useState(p?"peggys_list":"scheduled"),[I,$]=h.useState(p?"title_asc":"date_asc"),[J,O]=h.useState(""),[P,he]=h.useState(""),[q,U]=h.useState([]),[Y,_]=h.useState(!1),[k,pe]=h.useState([]);h.useEffect(()=>{g||f("/")},[g,f,c]);const w=e=>e&&e.email&&ce[e.email.toLowerCase()]&&ce[e.email.toLowerCase()].includes(c),T=()=>{if(!R)throw console.error("Firestore 'db' is not initialized."),new Error("Firestore not initialized");return c==="angelas"?ae(R,"books"):ae(R,"clubs",c,"books")};h.useEffect(()=>{const e=$e(K,o=>{l(o)});return()=>e()},[]),h.useEffect(()=>{if(!c||!R)return;let e=()=>{};try{const o=Pe(T(),Ue("sortDate","desc"));e=Fe(o,n=>{const a=n.docs.map(s=>({...s.data(),key:s.id}));pe(a)})}catch(o){console.error("Error setting up Firestore listener:",o)}return()=>e()},[c]),h.useEffect(()=>{$(u==="scheduled"?"date_asc":u==="peggys_list"?"title_asc":"date_desc")},[u]);const ge=async e=>{e.preventDefault();try{await Oe(K,H,Z),D(!1),Q(""),X("")}catch(o){alert("Login failed: "+o.message)}},be=async()=>{await Me(K)},ee=async e=>{if(!e||!e.trim())return;_(!0),j("search"),U([]);const o=new AbortController,n=setTimeout(()=>o.abort(),15e3),a=`&key=${Ke}`;try{const s=await fetch(`https://www.googleapis.com/books/v1/volumes?q=${encodeURIComponent(e)}&maxResults=40&printType=books${a}`,{signal:o.signal});if(clearTimeout(n),!s.ok)throw s.status===429?new Error("Please wait a moment and try again."):new Error(`API Error: ${s.status} ${s.statusText}`);const v=((await s.json()).items||[]).map(b=>{const y=b.volumeInfo.title,C=b.volumeInfo.authors||["Unknown"],x=C.join(" ");let E=null;if(b.volumeInfo.industryIdentifiers){const S=b.volumeInfo.industryIdentifiers.find(L=>L.type==="ISBN_13")||b.volumeInfo.industryIdentifiers.find(L=>L.type==="ISBN_10");S&&(E=S.identifier)}return{key:b.id,title:y,author_name:C,coverUrl:b.volumeInfo.imageLinks?.thumbnail?.replace("http:","https:"),isbn:E,goodreadsLink:`https://www.goodreads.com/search?q=${encodeURIComponent(y+" "+x)}`,wcclsLink:`https://wccls.bibliocommons.com/v2/search?query=${encodeURIComponent(y+" "+x)}&searchType=smart`,multcolibLink:`https://multcolib.bibliocommons.com/v2/search?query=${encodeURIComponent(y+" "+x)}&searchType=smart`}});U(v)}catch(s){s.name==="AbortError"?(console.error("Search timed out:",s),alert("The book search timed out. Please try again.")):(console.error("Error fetching books:",s),alert(`Failed to search books: ${s.message}`)),U([])}finally{clearTimeout(n),_(!1)}},fe=async e=>{e.preventDefault(),ee(J)},te=e=>{O(e),ee(e)},G=async e=>{_(!0),j("search");try{const o=await fetch(`https://api.nytimes.com/svc/books/v3/lists/current/${e}.json?api-key=${ze.trim()}`);if(!o.ok)throw new Error(`API Error: ${o.status} ${o.statusText}`);const a=((await o.json()).results?.books||[]).map(s=>({key:s.primary_isbn13||s.primary_isbn10||s.title,title:s.title,author_name:[s.author],coverUrl:s.book_image||`https://covers.openlibrary.org/b/isbn/${s.primary_isbn13}-M.jpg`,isbn:s.primary_isbn13,goodreadsLink:`https://www.goodreads.com/search?q=${encodeURIComponent(s.title+" "+s.author)}`,wcclsLink:`https://wccls.bibliocommons.com/v2/search?query=${encodeURIComponent(s.title+" "+s.author)}&searchType=smart`,multcolibLink:`https://multcolib.bibliocommons.com/v2/search?query=${encodeURIComponent(s.title+" "+s.author)}&searchType=smart`}));U(a)}catch(o){console.error("Error fetching NYT list:",o),alert(`Failed to fetch NYT Bestsellers: ${o.message}`)}finally{_(!1)}},F=async(e,o="suggested")=>{if(p&&!w(r)){alert("Only admins can add to Peggy's Books.");return}if(o!=="suggested"&&!w(r)){alert("Only admins can add to this list.");return}const n=`You are adding "${e.title}" to the ${o} list for:

ðŸ“˜ ${g.name}

Is this the correct club?`;if(window.confirm(n)){let a=o==="read"?new Date().toLocaleDateString():"",s=new Date().toISOString(),m=r&&r.email?r.email.split("@")[0]:"Guest",v="";const b=window.prompt("Enter Month/Year (e.g. 'January 2025'):",a);if(b!==null){a=b;const x=V(a);x.getTime()!==new Date(0).getTime()&&(s=x.toISOString())}const y=window.prompt("Enter Proposer Name:",m);y!==null&&(m=y);const C=window.prompt("Enter Comments:","");C!==null&&(v=C);try{await ie(T(),{title:e.title,author_name:e.author_name,coverUrl:e.coverUrl||null,isbn:e.isbn||null,status:o,sortDate:s,displayDate:a,proposer:m,comments:v,goodreadsLink:`https://www.goodreads.com/search?q=${encodeURIComponent(e.title+" "+(Array.isArray(e.author_name)?e.author_name.join(" "):e.author_name))}`,wcclsLink:`https://wccls.bibliocommons.com/v2/search?query=${encodeURIComponent(e.title+" "+(Array.isArray(e.author_name)?e.author_name.join(" "):e.author_name))}&searchType=smart`,multcolibLink:`https://multcolib.bibliocommons.com/v2/search?query=${encodeURIComponent(e.title+" "+(Array.isArray(e.author_name)?e.author_name.join(" "):e.author_name))}&searchType=smart`,attemptedV2:!!e.coverUrl}),alert("Book added!"),j(o),O("")}catch(x){console.error("Error adding book: ",x),alert("Error adding book.")}}else alert(`Action cancelled.

If you are in the wrong club, please click 'â† Back to Clubs' at the top left to return to the main menu.`)},xe=async e=>{if(!r||!w(r))return;const o=window.prompt("Edit Date (Month/Year):",e.displayDate||"");if(o===null)return;const n=window.prompt("Edit Proposer:",e.proposer||"");if(n===null)return;const a=window.prompt("Edit Comments:",e.comments||"");if(a===null)return;let s=e.sortDate;if(o!==e.displayDate){const m=V(o);m.getTime()!==new Date(0).getTime()&&(s=m.toISOString())}try{const m=le(T(),e.key);await qe(m,{displayDate:o,proposer:n,comments:a,sortDate:s})}catch(m){console.error("Error updating book: ",m),alert("Error updating book.")}},ye=async e=>{!r||!w(r)||window.confirm("Are you sure you want to delete this book?")&&await Ye(le(T(),e))},we=async()=>{if(!(!r||!w(r))){if(!g.sheetUrl){alert("No Google Sheet configured for this club.");return}if(window.confirm("Import new books from Google Sheet?")){_(!0);try{const n=(await(await fetch(g.sheetUrl)).text()).split(`
`);if(n.length<2)throw new Error("No data found");const a=n[0].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(i=>i.replace(/^"|"$/g,"").trim().toLowerCase()),s=a.findIndex(i=>i.includes("title")||i.includes("book")),m=a.findIndex(i=>i.includes("author")),v=a.findIndex(i=>i.includes("month")||i.includes("read")||i.includes("year")),b=a.findIndex(i=>i.includes("proposer")||i.includes("host")),y=a.findIndex(i=>i.includes("isbn")),C=a.findIndex(i=>i.includes("comment")||i.includes("note")),x=s!==-1?s:0,E=m!==-1?m:1;let S=0;const L=[],se=new Set(k.map(i=>i.title.toLowerCase().trim()));for(let i=1;i<n.length;i++){const N=n[i].split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/).map(Ne=>Ne.replace(/^"|"$/g,"").trim());if(N.length<=Math.max(x,E))continue;const A=N[x],M=N[E];if(!A)continue;const re=A.toLowerCase().trim();if(se.has(re))continue;se.add(re);const ne=v!==-1&&N[v]||"",je=b!==-1&&N[b]||"",ke=y!==-1?N[y]:null,Ce=C!==-1?N[C]:"";let B=V(ne),W="read";B.getTime()===new Date(0).getTime()||isNaN(B.getTime())?W="suggested":B>=new Date(new Date().getFullYear(),new Date().getMonth(),1)&&(W="scheduled"),B.setTime(B.getTime()+i*1e3);const ve={title:A,author_name:[M],isbn:ke,coverUrl:null,status:W,sortDate:B.toISOString(),displayDate:ne,proposer:je,comments:Ce,goodreadsLink:`https://www.goodreads.com/search?q=${encodeURIComponent(A+" "+M)}`,wcclsLink:`https://wccls.bibliocommons.com/v2/search?query=${encodeURIComponent(A+" "+M)}&searchType=smart`,multcolibLink:`https://multcolib.bibliocommons.com/v2/search?query=${encodeURIComponent(A+" "+M)}&searchType=smart`,attemptedV2:!1};L.push(ie(T(),ve)),S++}await Promise.all(L),alert(S>0?`Successfully imported ${S} new books!`:"No new books found to import.")}catch(e){console.error("Migration failed",e),alert("Migration failed: "+e.message)}finally{_(!1)}}}},oe=h.useMemo(()=>{let e=[];return u==="search"?q:(p?e=k.filter(o=>{if(!o)return!1;const n=o.title?o.title.toLowerCase():"",a=Array.isArray(o.author_name)?o.author_name.join(" ").toLowerCase():String(o.author_name||"").toLowerCase(),s=P.toLowerCase();return n.includes(s)||a.includes(s)}):e=k.filter(o=>{if(!o)return!1;const n=o.status===u,a=o.title?o.title.toLowerCase():"",s=Array.isArray(o.author_name)?o.author_name.join(" ").toLowerCase():String(o.author_name||"").toLowerCase(),m=P.toLowerCase();return n&&(a.includes(m)||s.includes(m))}),e.sort((o,n)=>{if(I==="date_desc")return new Date(n.sortDate||0)-new Date(o.sortDate||0);if(I==="date_asc")return new Date(o.sortDate||0)-new Date(n.sortDate||0);if(I==="author_asc"){const a=Array.isArray(o.author_name)?o.author_name.join(" "):o.author_name||"",s=Array.isArray(n.author_name)?n.author_name.join(" "):n.author_name||"";return a.localeCompare(s)}else if(I==="title_asc")return(o.title||"").localeCompare(n.title||"");return 0}),e)},[u,q,p,k,P,I]);return g?R?t.jsxs("div",{className:"app-container",children:[t.jsxs("header",{children:[t.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px",alignItems:"center"},children:[t.jsx("button",{onClick:()=>f("/"),style:{cursor:"pointer",background:"none",border:"none",color:"#555",fontSize:"1rem"},children:"â† Back to Clubs"}),r?t.jsxs("div",{style:{fontSize:"0.9rem"},children:["Logged in as ",r.email,w(r)&&t.jsx("button",{onClick:we,style:{marginLeft:"10px",cursor:"pointer",backgroundColor:"#e67e22",color:"white",border:"none",borderRadius:"4px",padding:"2px 8px"},children:"Import CSV"}),t.jsx("button",{onClick:be,style:{marginLeft:"10px",cursor:"pointer"},children:"Logout"})]}):t.jsx("button",{onClick:()=>D(!d),style:{cursor:"pointer"},children:"Admin Login"})]}),d&&!r&&t.jsxs("form",{onSubmit:ge,style:{marginBottom:"20px",padding:"15px",background:"#f0f0f0",borderRadius:"8px"},children:[t.jsx("input",{type:"email",placeholder:"Email",value:H,onChange:e=>Q(e.target.value),style:{marginRight:"10px",padding:"5px"}}),t.jsx("input",{type:"password",placeholder:"Password",value:Z,onChange:e=>X(e.target.value),style:{marginRight:"10px",padding:"5px"}}),t.jsx("button",{type:"submit",style:{padding:"5px 10px"},children:"Login"})]}),t.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[t.jsx("img",{src:me,alt:"Shiba Books Logo",style:{width:"80px",height:"80px",objectFit:"contain"}}),t.jsx("h1",{style:{margin:"10px 0"},children:g.name}),t.jsx("p",{style:{color:"#666"},children:p?t.jsxs(t.Fragment,{children:["My cousin Peggy loved to read and introduced many people to good books.",t.jsx("br",{}),"When I need a good book, I can always find one on her list."]}):"Scheduled books, extra/suggested books, and books we've read."})]})]}),t.jsxs("form",{onSubmit:fe,className:"search-section",children:[t.jsx("input",{type:"text",className:"search-input",placeholder:"Search Google Books... add to our list",value:J,onChange:e=>O(e.target.value)}),t.jsx("button",{type:"submit",className:"search-btn",disabled:Y,children:Y?"Searching...":"Search"})]}),t.jsx("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"20px",flexWrap:"wrap"},children:c==="um-pdx"?t.jsxs(t.Fragment,{children:[t.jsx("a",{href:"https://michigantoday.umich.edu/alumni/books",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"ã€½ï¸ Michigan Today Books"}),t.jsx("a",{href:"https://press.uchicago.edu/ucp/books/affiliations/af16142424.html",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"ðŸ“š UChicago Press (UM)"}),t.jsx("a",{href:"https://lsa.umich.edu/writers/alumni-friends/alumni-books.html",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"ðŸŽ“ LSA Alumni Books"}),t.jsx("a",{href:"https://alumni.umich.edu/?taxonomy=notable-alumni-category&term=writers-poets",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"âœï¸ Notable Alumni Writers"}),t.jsx("div",{style:{flexBasis:"100%",height:0}}),t.jsx("a",{href:"https://wccls.bibliocommons.com/v2/list/display/1303184917/1933421229",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"ðŸŒ² Local PNW Books"}),t.jsx("a",{href:"https://www.eugenecascadescoast.org/blog/post/books/",target:"_blank",rel:"noopener noreferrer",className:"tab-btn tab-btn-external",children:"ðŸ”ï¸ Eugene/Cascades Books"})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:()=>G("combined-print-and-e-book-fiction"),className:"tab-btn tab-btn-external",children:"ðŸ† Browse NYT Fiction"}),t.jsx("button",{onClick:()=>G("combined-print-and-e-book-nonfiction"),className:"tab-btn tab-btn-external",children:"ðŸ† Browse NYT Non-Fiction"}),t.jsx("button",{onClick:()=>G("trade-fiction-paperback"),className:"tab-btn tab-btn-external",children:"ðŸ“– Browse NYT Book Club Picks"}),t.jsx("button",{onClick:()=>te("subject:mystery"),className:"tab-btn tab-btn-external",children:"ðŸ•µï¸ Browse Mystery"}),t.jsx("button",{onClick:()=>te("subject:biography"),className:"tab-btn tab-btn-external",children:"ðŸ‘¤ Browse Biographies"})]})}),t.jsxs("div",{className:"tabs",children:[p?t.jsxs("button",{className:`tab-btn ${u!=="search"?"active":""}`,onClick:()=>j("peggys_list"),children:["Peggy's Book List (",k.length,")"]}):t.jsxs(t.Fragment,{children:[t.jsxs("button",{className:`tab-btn ${u==="scheduled"?"active":""}`,onClick:()=>j("scheduled"),children:["Scheduled ðŸ“… Books (",k.filter(e=>e.status==="scheduled").length,")"]}),t.jsxs("button",{className:`tab-btn ${u==="suggested"?"active":""}`,onClick:()=>j("suggested"),children:["ðŸ’¡ Suggested and Extras (",k.filter(e=>e.status==="suggested").length,")"]}),t.jsxs("button",{className:`tab-btn ${u==="read"?"active":""}`,onClick:()=>j("read"),children:["ðŸ“šBooks We've Read (",k.filter(e=>e.status==="read").length,")"]})]}),(q.length>0||u==="search")&&t.jsx("button",{className:`tab-btn ${u==="search"?"active":""}`,onClick:()=>j("search"),children:"ðŸ” Search Results"})]}),u!=="search"&&t.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"10px",marginBottom:"20px",maxWidth:"600px",margin:"0 auto 2rem auto"},children:[t.jsx("input",{type:"text",className:"filter-input",placeholder:p?"Filter Peggy's books...":`Filter ${u} books...`,value:P,onChange:e=>he(e.target.value),style:{margin:0,flex:1}}),t.jsxs("select",{value:I,onChange:e=>$(e.target.value),style:{padding:"0.5rem",borderRadius:"6px",border:"1px solid #ccc",backgroundColor:"white",cursor:"pointer"},children:[t.jsx("option",{value:"date_desc",children:"Most Recent First"}),t.jsx("option",{value:"date_asc",children:"Oldest First"}),t.jsx("option",{value:"author_asc",children:"Author (A-Z)"}),t.jsx("option",{value:"title_asc",children:"Title (A-Z)"})]})]}),t.jsx("div",{className:"book-grid",children:oe.length===0?t.jsx("div",{className:"empty-state",children:u==="search"?Y?"Searching...":"No results found. Try a different search.":"No books in this list yet."}):oe.map(e=>t.jsx("div",{className:"book-card",children:t.jsxs("div",{className:"book-info",children:[t.jsx("h3",{className:"book-title",children:e.title}),t.jsx("p",{className:"book-author",children:e.author_name?Array.isArray(e.author_name)?e.author_name.join(", "):e.author_name:"Unknown Author"}),e.displayDate&&t.jsxs("p",{className:`book-date ${e.status==="scheduled"?"highlight":""}`,children:["ðŸ“… ",e.displayDate]}),e.proposer&&t.jsxs("p",{className:"book-meta",children:["ðŸ‘¤ Proposed by: ",e.proposer]}),e.comments&&t.jsxs("p",{className:"book-comments",children:['"',e.comments,'"']}),e.goodreadsLink&&t.jsx("a",{href:e.goodreadsLink,target:"_blank",rel:"noopener noreferrer",className:"book-link",style:{display:"block",marginTop:"0.5rem"},children:"View on Goodreads â†’"}),(e.wcclsLink||e.title)&&t.jsx("a",{href:e.wcclsLink||`https://wccls.bibliocommons.com/v2/search?query=${encodeURIComponent(e.title+(e.author_name?" "+(Array.isArray(e.author_name)?e.author_name.join(" "):e.author_name):""))}&searchType=smart`,target:"_blank",rel:"noopener noreferrer",className:"book-link",children:"View on WCCLS â†’"}),(e.multcolibLink||e.title)&&t.jsx("a",{href:e.multcolibLink||`https://multcolib.bibliocommons.com/v2/search?query=${encodeURIComponent(e.title+(e.author_name?" "+(Array.isArray(e.author_name)?e.author_name.join(" "):e.author_name):""))}&searchType=smart`,target:"_blank",rel:"noopener noreferrer",className:"book-link",children:"View on MultCoLib â†’"}),t.jsxs("div",{className:"actions",children:[u==="search"&&t.jsx(t.Fragment,{children:p?w(r)&&t.jsx("button",{className:"action-btn btn-suggest",onClick:()=>F(e,"peggys_list"),children:"+ Add to List"}):t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"action-btn btn-suggest",onClick:()=>F(e,"suggested"),children:"+ Add to Suggestions"}),w(r)&&t.jsxs(t.Fragment,{children:[t.jsx("button",{className:"action-btn btn-read",onClick:()=>F(e,"read"),style:{marginTop:"5px"},children:"+ Add to Read"}),t.jsx("button",{className:"action-btn btn-suggest",style:{backgroundColor:"#8e44ad",marginTop:"5px"},onClick:()=>F(e,"scheduled"),children:"+ Add to Scheduled"})]})]})}),w(r)&&u!=="search"&&t.jsxs("div",{style:{display:"flex",gap:"5px",marginTop:"5px"},children:[t.jsx("button",{className:"action-btn",style:{backgroundColor:"#2980b9",color:"white"},onClick:()=>xe(e),children:"Edit"}),t.jsx("button",{className:"action-btn btn-remove",onClick:()=>ye(e.key),children:"Delete"})]})]})]})},e.key))})]}):t.jsxs("div",{className:"app-container",style:{textAlign:"center",padding:"50px",color:"red"},children:[t.jsx("h2",{children:"Configuration Error"}),t.jsx("p",{children:"Firebase Database (db) is not initialized."}),t.jsxs("p",{children:["Please check your ",t.jsx("code",{children:"firebase.js"})," file and console logs."]})]}):t.jsx("div",{className:"app-container",style:{textAlign:"center",padding:"50px"},children:"Loading club or redirecting..."})},Ze=()=>t.jsxs(Ie,{children:[t.jsx(Ve,{}),t.jsxs(_e,{children:[t.jsx(z,{path:"/",element:t.jsx(He,{})}),t.jsx(z,{path:"/club/:clubId",element:t.jsx(Qe,{})}),t.jsx(z,{path:"*",element:t.jsx(Se,{to:"/",replace:!0})})]})]});De.createRoot(document.getElementById("root")).render(t.jsx(h.StrictMode,{children:t.jsx(Ze,{})}));
